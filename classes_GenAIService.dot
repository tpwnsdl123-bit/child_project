digraph "classes_GenAIService" {
rankdir=BT
charset="utf-8"
"pybo.service.auth_service.AuthService" [color="black", fontcolor="black", label=<{AuthService|user_repo<br ALIGN="LEFT"/>|authenticate(form): Tuple[Optional[Users], Optional[str]]<br ALIGN="LEFT"/>change_password(user_id: int, new_password: str): bool<br ALIGN="LEFT"/>create_user_from_form(form): Tuple[Optional[Users], Optional[str]]<br ALIGN="LEFT"/>find_user_for_reset(username: str, email: str): Optional[Users]<br ALIGN="LEFT"/>find_username_by_email(email: str): Optional[str]<br ALIGN="LEFT"/>}>, shape="record", style="solid"];
"pybo.service.data_service.DataService" [color="black", fontcolor="black", label=<{DataService|region_repo<br ALIGN="LEFT"/>|get_dashboard_data(district: str \| None, start_year: int \| None, end_year: int \| None): dict<br ALIGN="LEFT"/>get_districts(): dict<br ALIGN="LEFT"/>get_predict_data(year: int, district: str): dict<br ALIGN="LEFT"/>get_predict_series(district: str): dict<br ALIGN="LEFT"/>}>, shape="record", style="solid"];
"pybo.service.genai_service.GenAIService" [color="black", fontcolor="black", label=<{GenAIService|api_url : NoneType<br ALIGN="LEFT"/>default_settings : dict<br ALIGN="LEFT"/>rag_service<br ALIGN="LEFT"/>session : Session<br ALIGN="LEFT"/>|answer_qa_with_log(question: str): str<br ALIGN="LEFT"/>generate_policy(user_prompt: str): str<br ALIGN="LEFT"/>generate_report_with_data(user_prompt: str): str<br ALIGN="LEFT"/>summarize_text(text: str): str<br ALIGN="LEFT"/>update_settings(settings: dict)<br ALIGN="LEFT"/>}>, shape="record", style="solid"];
"pybo.service.qna_service.QnaService" [color="black", fontcolor="black", label=<{QnaService|question_repo<br ALIGN="LEFT"/>|can_edit_or_delete(question, user): bool<br ALIGN="LEFT"/>create_answer(question_id: int, content: str)<br ALIGN="LEFT"/>create_question_from_form(form)<br ALIGN="LEFT"/>delete_question(question)<br ALIGN="LEFT"/>get_question_detail(question_id: int)<br ALIGN="LEFT"/>get_question_list(page: int, per_page: int)<br ALIGN="LEFT"/>update_question_from_form(question, form)<br ALIGN="LEFT"/>}>, shape="record", style="solid"];
"pybo.service.genai_service.QueryMeta" [color="black", fontcolor="black", label=<{QueryMeta|district : str<br ALIGN="LEFT"/>end_year : Optional[int]<br ALIGN="LEFT"/>start_year : Optional[int]<br ALIGN="LEFT"/>|}>, shape="record", style="solid"];
"pybo.service.question_repository.QuestionRepository" [color="black", fontcolor="black", label=<{QuestionRepository|<br ALIGN="LEFT"/>|create_answer(question: Question, content: str, user): Answer<br ALIGN="LEFT"/>create_question(subject: str, content: str, user)<br ALIGN="LEFT"/>delete_question(question: Question): None<br ALIGN="LEFT"/>get_question_or_404(question_id: int): Question<br ALIGN="LEFT"/>get_question_page(page: int, per_page: int)<br ALIGN="LEFT"/>update_question(question: Question, subject: str, content: str): Question<br ALIGN="LEFT"/>}>, shape="record", style="solid"];
"pybo.service.rag_service.RagService" [color="black", fontcolor="black", label=<{RagService|embeddings<br ALIGN="LEFT"/>jsonl_path : str<br ALIGN="LEFT"/>persist_directory : str<br ALIGN="LEFT"/>vector_db : NoneType<br ALIGN="LEFT"/>|get_relevant_context(question: str): str<br ALIGN="LEFT"/>}>, shape="record", style="solid"];
"pybo.service.region_repository.RegionRepository" [color="black", fontcolor="black", label=<{RegionRepository|<br ALIGN="LEFT"/>|get_dashboard_rows(district: str \| None, start_year: int \| None, end_year: int \| None)<br ALIGN="LEFT"/>get_district_rows()<br ALIGN="LEFT"/>get_forecast_row(year: int, district: str)<br ALIGN="LEFT"/>get_forecast_sum_child_user(year: int)<br ALIGN="LEFT"/>get_region_row(year: int, district: str)<br ALIGN="LEFT"/>get_region_series_actual(district: str)<br ALIGN="LEFT"/>get_region_series_forecast(district: str)<br ALIGN="LEFT"/>get_region_sum_child_user(year: int)<br ALIGN="LEFT"/>get_seoul_avg_forecast(year: int)<br ALIGN="LEFT"/>get_seoul_avg_region(year: int)<br ALIGN="LEFT"/>get_total_forecast_child_user(year: int)<br ALIGN="LEFT"/>get_total_region_child_user_facility(year: int)<br ALIGN="LEFT"/>get_total_series_actual()<br ALIGN="LEFT"/>get_total_series_forecast()<br ALIGN="LEFT"/>}>, shape="record", style="solid"];
"pybo.service.user_repository.UserRepository" [color="black", fontcolor="black", label=<{UserRepository|<br ALIGN="LEFT"/>|add(user: Users)<br ALIGN="LEFT"/>commit()<br ALIGN="LEFT"/>get_by_email(email: str): Users \| None<br ALIGN="LEFT"/>get_by_id(user_id: int): Users \| None<br ALIGN="LEFT"/>get_by_username(username: str): Users \| None<br ALIGN="LEFT"/>get_by_username_and_email(username: str, email: str): Users \| None<br ALIGN="LEFT"/>rollback()<br ALIGN="LEFT"/>}>, shape="record", style="solid"];
"pybo.service.qna_service.QnaService" -> "pybo.service.question_repository.QuestionRepository" [arrowhead="vee", arrowtail="none", fontcolor="green", label="question_repo", style="solid"];
"pybo.service.auth_service.AuthService" -> "pybo.service.user_repository.UserRepository" [arrowhead="vee", arrowtail="none", fontcolor="green", label="user_repo", style="solid"];
"pybo.service.region_repository.RegionRepository" -> "pybo.service.data_service.DataService" [arrowhead="diamond", arrowtail="none", fontcolor="green", label="region_repo", style="solid"];
}
